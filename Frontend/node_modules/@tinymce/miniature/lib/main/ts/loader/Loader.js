import { deleteTinymceGlobals, getTinymce } from './Globals';
import { loadScript, removeTinymceElements } from './Script';
import { updateTinymceUrls } from './Urls';
const versionToPackageName = (version) => version === 'latest' ? 'tinymce' : `tinymce-${version}`;
const loadFrom = (customUrl, baseUrl, success, failure) => {
    unload();
    loadScript(customUrl, () => {
        getTinymce().each((tinymce) => {
            tinymce.baseURL = baseUrl;
            tinymce.baseURI = new tinymce.util.URI(tinymce.baseURL);
        });
        success();
    }, failure);
};
const load = (version, success, failure) => {
    const packageName = versionToPackageName(version);
    unload();
    loadScript(`/project/node_modules/${packageName}/tinymce.min.js`, () => {
        updateTinymceUrls(versionToPackageName(version));
        success();
    }, failure);
};
const unload = () => {
    getTinymce().each((tinymce) => tinymce.remove());
    removeTinymceElements();
    deleteTinymceGlobals();
};
export { load, loadFrom, unload };
//# sourceMappingURL=Loader.js.map