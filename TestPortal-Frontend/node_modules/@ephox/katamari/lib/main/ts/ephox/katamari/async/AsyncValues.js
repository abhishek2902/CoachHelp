import * as Arr from '../api/Arr';
/*
 * NOTE: an `asyncValue` must have a `get` function which gets given a callback and calls
 * that callback with a value once it is ready
 *
 * e.g
 * {
 *   get: (callback) => { callback(10); }
 * }
 */
export const par = (asyncValues, nu) => {
    return nu((callback) => {
        const r = [];
        let count = 0;
        const cb = (i) => {
            return (value) => {
                r[i] = value;
                count++;
                if (count >= asyncValues.length) {
                    callback(r);
                }
            };
        };
        if (asyncValues.length === 0) {
            callback([]);
        }
        else {
            Arr.each(asyncValues, (asyncValue, i) => {
                asyncValue.get(cb(i));
            });
        }
    });
};
//# sourceMappingURL=AsyncValues.js.map