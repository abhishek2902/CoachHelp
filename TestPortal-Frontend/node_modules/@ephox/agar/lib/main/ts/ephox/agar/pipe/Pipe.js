import { addStackTrace } from '../api/TestLogs';
export const Pipe = (f) => (value, next, die, logs) => {
    const bounceNext = (value, nextLogs) => {
        Promise.resolve().then(() => {
            next(value, nextLogs);
        });
    };
    try {
        f(value, bounceNext, die, logs);
    }
    catch (err) {
        const logsWithTrace = addStackTrace(logs, err);
        die(err, logsWithTrace);
    }
};
//# sourceMappingURL=Pipe.js.map