import { GeneralSteps, Step } from '@ephox/agar';
import { load, loadFrom, unload } from './Loader';
import { readAllPlugins, registerPlugins } from './Plugins';
const sUnload = Step.sync(unload);
const sLoad = (version) => GeneralSteps.sequence([
    sUnload,
    Step.async((next, die) => {
        load(version, next, die);
    })
]);
const sLoadFrom = (customUrl, baseUrl) => GeneralSteps.sequence([
    sUnload,
    Step.async((next, die) => {
        loadFrom(customUrl, baseUrl, next, die);
    })
]);
const sRegisterPlugins = (plugins) => Step.sync(() => registerPlugins(plugins));
const sWithVersion = (version, step) => {
    const plugins = readAllPlugins();
    return GeneralSteps.sequence([
        sLoad(version),
        step,
        sLoad('latest'),
        sRegisterPlugins(plugins)
    ]);
};
export { sWithVersion, sLoad, sLoadFrom, sUnload };
//# sourceMappingURL=Versions.js.map