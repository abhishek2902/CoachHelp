<body style="background-color: #f3f4f6; font-family: Arial, sans-serif; margin: 0; padding: 0;">
  <table align="center" border="0" cellpadding="0" cellspacing="0" width="600" style="background-color: #ffffff; border: 1px solid #d1d5db; border-radius: 8px; overflow: hidden;">

    <!-- Header -->
    <tr>
      <td align="center" style="background-color: #1f2937; padding: 20px;">
        <h1 style="color: #ffffff; margin: 0; font-size: 24px;">New Subscription Alert</h1>
      </td>
    </tr>

    <!-- Body Content -->
    <tr>
      <td style="padding: 30px;">
        <p style="font-size: 18px; color: #111827; margin-bottom: 20px;">ðŸŽ‰ A new subscription has been purchased.</p>

        <table cellpadding="5" cellspacing="0" border="0" style="font-size: 15px; color: #374151; width: 100%; margin-bottom: 20px;">
          <tr>
            <td><strong>Email:</strong></td>
            <td><%= @user.email.presence || "N/A" %></td>
          </tr>
          <tr>
            <td><strong>Plan:</strong></td>
            <td><%= @plan.name.presence || "N/A" %></td>
          </tr>
          <tr>
            <td><strong>Tests Allowed:</strong></td>
            <td><%= @plan.tests_allowed || "N/A" %></td>
          </tr>
          <tr>
            <td><strong>Valid Till:</strong></td>
            <td><%= @subscription.end_date.strftime("%B %d, %Y") if @subscription&.end_date %></td>
          </tr>
        </table>

        <p style="font-size: 16px; color: #4b5563;">
          Please check the admin panel for full subscription details.
        </p>

        <p style="font-size: 16px; color: #4b5563;">
          Regards,<br>
          Talent Test System
        </p>
      </td>
    </tr>

    <!-- Footer -->
    <tr>
      <td align="center" style="background-color: #e5e7eb; padding: 20px; font-size: 12px; color: #6b7280;">
        Â© <%= Time.current.year %> Talent Test. All rights reserved.
      </td>
    </tr>

  </table>
</body>
